<!DOCTYPE html>
<html xmlns:layout="http://www.w3.org/1999/xhtml" layout:decorate="~{layout}">

<body>
    <div class="container" layout:fragment="corpo">
        <h2>Cadastro de Cliente</h2>

        <form th:object="${cliente}" method="POST">
            <div th:replace="fragments/alerta"></div>

            <div class="row">
                <div class="form-group col-md-4">
                    <label>Nome</label>
                    <input type="text" class="form-control" placeholder="Nome..." th:field="*{nome}" autofocus
                        th:classappend="${#fields.hasErrors('nome')} ? 'is-invalid'" />

                    <div class="invalid-feedback">
                        <span th:errors="*{nome}"></span>
                    </div>
                </div>

                <div class="form-group col-md-4">
                    <label>CPF</label>
                    <input type="text" class="form-control" placeholder="CPF..." 
                        maxlength="11" th:field="*{cpf}" 
                        th:classappend="${#fields.hasErrors('cpf')} ? 'is-invalid'"
                        th:readOnly="${cliente.cpf != null}" />

                    <div class="invalid-feedback">
                        <span th:errors="*{cpf}"></span>
                    </div>

                    <span class="erro-existe" th:if="${cpfExiste}" th:text="${cpfExiste}"></span>
                </div>
            </div>

            <div class="row">
                <div class="form-group col-md-4">
                    <label>E-mail</label>
                    <input type="text" class="form-control" placeholder="E-mail..." th:field="*{email}"
                        th:classappend="${#fields.hasErrors('email')} ? 'is-invalid'" />

                    <div class="invalid-feedback">
                        <span th:errors="*{email}"></span>
                    </div>

                    <span class="erro-existe" th:if="${emailExiste}" th:text="${emailExiste}"></span>
                </div>

                <div class="form-group col-md-4">
                    <label>Telefone</label>
                    <input type="text" class="form-control" placeholder="Telefone..."
                        th:field="*{telefone}" th:classappend="${#fields.hasErrors('telefone')} ? 'is-invalid'" />

                    <div class="invalid-feedback">
                        <span th:errors="*{telefone}"></span>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="form-group col-md-3">
                    <label for="cep">Cep</label>
                    <input type="text" class="form-control" id="cep" placeholder="Cep..." maxlength="9"
                        th:field="*{endereco.cep}" th:classappend="${#fields.hasErrors('endereco.cep')} ? 'is-invalid'" />

                    <div class="invalid-feedback">
                        <span th:errors="*{endereco.cep}"></span>
                    </div>
                </div>

                <div class="form-group col-md-6">
                    <label for="rua">Logradouro</label>
                    <input type="text" class="form-control" id="rua" placeholder="Logradouro..."
                        th:field="*{endereco.logradouro}" th:classappend="${#fields.hasErrors('endereco.logradouro')} ? 'is-invalid'" />

                    <div class="invalid-feedback">
                        <span th:errors="*{endereco.logradouro}"></span>
                    </div>
                </div>

                <div class="form-group col-md-3">
                    <label for="complemento">Complemento</label>
                    <input type="text" class="form-control" id="complemento" placeholder="Complemento..."
                        th:field="*{endereco.complemento}" th:classappend="${#fields.hasErrors('endereco.complemento')} ? 'is-invalid'" />

                    <div class="invalid-feedback">
                        <span th:errors="*{endereco.complemento}"></span>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="form-group col-md-4">
                    <label for="bairro">Bairro</label>
                    <input type="text" class="form-control" id="bairro" placeholder="Bairro..." maxlength="9"
                        th:field="*{endereco.bairro}" th:classappend="${#fields.hasErrors('endereco.bairro')} ? 'is-invalid'" />

                    <div class="invalid-feedback">
                        <span th:errors="*{endereco.bairro}"></span>
                    </div>
                </div>

                <div class="form-group col-md-4">
                    <label for="cidade">Cidade</label>
                    <input type="text" class="form-control" id="cidade" placeholder="Cidade..."
                        th:field="*{endereco.cidade}" th:classappend="${#fields.hasErrors('endereco.cidade')} ? 'is-invalid'" />

                    <div class="invalid-feedback">
                        <span th:errors="*{endereco.cidade}"></span>
                    </div>
                </div>

                <div class="form-group col-md-4">
                    <label for="uf">Estado</label>
                    <input type="text" class="form-control" id="uf" placeholder="Estado..."
                        th:field="*{endereco.uf}" th:classappend="${#fields.hasErrors('endereco.uf')} ? 'is-invalid'" />

                    <div class="invalid-feedback">
                        <span th:errors="*{endereco.uf}"></span>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="form-group col-md-4">
                    <input type="hidden" id="id" th:field="*{id}" />
                    <button type="submit" class="btn btn-outline-primary">Salvar</button>
                    <a class="btn btn-outline-warning" th:href="@{/cliente/listar}">Cancelar</a>
                </div>
            </div>
        </form>
    </div>
</body>
</html>