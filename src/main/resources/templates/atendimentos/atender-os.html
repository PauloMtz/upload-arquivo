<!DOCTYPE html>
<html xmlns:layout="http://www.w3.org/1999/xhtml" layout:decorate="~{layout}">
<head>
    <script type="text/javascript" th:src="@{/js/jquery-3.6.4.slim.js}"></script>
    <script type="text/javascript" th:src="@{/js/add-peca.js}"></script>
</head> 
<body>
    <div class="container" layout:fragment="corpo">
        <h2>Atender Ordem de Serviço</h2>
        
        <form th:object="${atendimento}" method="POST">
            <div th:replace="~{fragments/alerta}"></div>
            <div class="row">
                <div class="form-group col-md-4">
                    <label>Número OS</label>
                    <input type="text" class="form-control"
                        th:field="*{ordemServico.numeroOs}" readonly />
                </div>

                <div class="form-group col-md-4">
                    <label>Cliente</label>
                    <input type="text" class="form-control" 
                        th:field="*{ordemServico.recebimento.cliente.nome}" readonly />
                </div>

                <div class="form-group col-md-4">
                    <label>Equipamento</label>
                    <input type="text" class="form-control" 
                        th:field="*{ordemServico.recebimento.equipamento.descricao}" readonly />
                </div>
            </div>

            <div class="row" style="margin-bottom:20px">
                <div class="form-group col-md-12">
                    <label>Descrição</label>
                    <textarea class="form-control" rows="3" placeholder="Descrição..."
                        th:field="*{descricao}"></textarea>
                </div>
            </div><hr>

            <div class="row" style="margin-top:20px;margin-bottom:20px">
                <div class="form-group col-md-4">
                    <label>Peças utilizadas</label>
                    <div class="input-group">
                        <input type="search" class="form-control rounded" placeholder="Código produto..." 
                            id="codigoProduto" name="busca" />
                        <button id="btnBuscar" class="btn btn-outline-primary">Buscar</button>
                    </div>
                </div>
                <div class="form-group col-md-4">
                    <label class="form-check-label">Descrição</label>
                    <div class="input-group">
                        <input type="text" class="form-control" id="produtoInput" readonly />
                        <button class="btn btn-outline-primary" id="btnAdicionar">Adicionar</button>
                    </div>
                </div>
                <div class="form-group col-md-4">
                    <label class="form-check-label">Acrescentar produto e quantidade</label>
                    <div id="listaProdutos">
                        <!-- Os itens adicionados aparecerão aqui -->
                    </div>
                </div>
            </div><hr>

            <div class="row">
                <div class="form-group col-md-4">
                    <button type="submit" class="btn btn-outline-primary">Salvar</button>
                    <a class="btn btn-outline-warning" th:href="@{/}">Cancelar</a>
                </div>
            </div>
        </form>
    </div>
</body>
</html>